name: D√©ployer vers Hugging Face Space

on:
  push:
    branches: [ "main" ]  # ‚Üê ‚ö†Ô∏è D√©clenchement uniquement sur main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      # -------------------------------------------------------------
      # √âtape 1. R√©cup√©rer le d√©p√¥t
      # -------------------------------------------------------------
      - name: üì• Checkout du d√©p√¥t
        uses: actions/checkout@v4

      # -------------------------------------------------------------
      # √âtape 2. (Optionnel) V√©rification rapide des d√©pendances
      # - Permet de d√©tecter les erreurs d'import avant le d√©ploiement
      # -------------------------------------------------------------
      - name: üß™ V√©rification d√©pendances (facultatif)
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"
      - name: Installer les d√©pendances
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      # -------------------------------------------------------------
      # √âtape 3. Push vers le Space Hugging Face
      # - Remplacer REPO_ID ci-dessous par l'ID exact de votre Space
      #   ex) Jiwonyi/mlops
      # -------------------------------------------------------------
      - name: üöÄ D√©ployer sur Hugging Face Space
        uses: huggingface/hub-action@v1
        with:
          repo_id: Jiwonyi/mlops      # ‚Üê ‚ö†Ô∏è Mettre l'ID EXACT de votre Space
          repo_type: space            # Espace HF
          commit_message: "CI: d√©ploiement automatique depuis GitHub Actions"
        env:
          HF_TOKEN: ${{ secrets.HF_TOKEN }}  # ‚Üê ‚ö†Ô∏è Secret GitHub requis
